<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{TITLE}} - Luke Miller</title>
  <link rel="stylesheet" href="../tufte-css/tufte.css" />
  <style>
    body {
      margin: 0;
      padding: 0;
      background-color: #fffff8;
      font-family: et-book, serif;
      display: flex;
      justify-content: center;
      min-height: 100vh;
    }

    .container {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      gap: 4rem;
      max-width: 1100px;
      width: 100%;
      padding: 2rem;
    }

    .content-left {
      flex: 1;
      margin-left: 168px; /* 140px nav width + 28px gap = roughly where home content starts */
    }

    .content-right {
      width: 240px;
      text-align: left;
      padding-left: 2rem;
    }

    .content-right .post-metadata {
      font-size: 1.1rem;
      color: #666;
      font-variant: small-caps;
      line-height: 1.4;
    }

    .content-right .post-metadata .categories,
    .content-right .post-metadata .tags {
      margin-bottom: 0.5rem;
    }

    .content-right .post-metadata .label {
      font-weight: bold;
      color: #333;
    }

    /* Make sidenotes and margin notes more subtle */
    .sidenote,
    .marginnote {
      font-size: 0.9rem !important;
      color: #777 !important;
      font-weight: 300 !important;
    }

    /* Article content styling */
    .content-left article {
      padding: 0;
    }

    .content-left h1 {
      font-style: italic;
      font-weight: 400;
      margin-top: 0;
      margin-bottom: 0.5rem;
      font-size: 2.8rem;
      line-height: 1.2;
    }

    .content-left .post-date {
      font-size: 1.2rem;
      color: #666;
      font-variant: small-caps;
      margin-bottom: 2rem;
    }

    /* Enhanced mobile responsiveness for individual posts */
    @media (max-width: 768px) {
      html {
        font-size: 18px; /* Better readability on mobile */
      }
      
      body {
        width: 90%;
        padding-left: 5%;
        padding-right: 5%;
        padding-top: 1rem;
        max-width: none;
      }
      
      .container {
        flex-direction: column;
        gap: 1rem;
        padding: 1.5rem 1rem;
        max-width: none;
      }
      
      .content-left {
        margin-left: 0; /* Remove the desktop offset */
        width: 100%;
      }
      
      .content-right {
        width: 100%;
        padding-left: 0;
        order: -1; /* Move metadata above content on mobile */
        border-bottom: 1px solid #eee;
        padding-bottom: 1rem;
        margin-bottom: 1rem;
      }
      
      .content-left h1 {
        font-size: 2.5rem; /* Smaller than desktop */
        line-height: 1.2;
      }
      
      .content-left .post-date {
        font-size: 1.1rem;
        margin-bottom: 1.5rem;
      }
      
      /* Make text more readable on mobile */
      p, li {
        font-size: 1.2rem !important;
        line-height: 1.6;
      }
      
      /* Make links more touch-friendly */
      a {
        padding: 0.2rem 0;
        margin: 0.1rem 0;
        display: inline-block;
      }
      
      /* Restore proper Tufte CSS mobile sidenote behavior */
      label.margin-toggle:not(.sidenote-number) {
        display: inline;
      }

      .sidenote,
      .marginnote {
        display: none;
      }

      .margin-toggle:checked + .sidenote,
      .margin-toggle:checked + .marginnote {
        display: block;
        float: left;
        left: 1rem;
        clear: both;
        width: 95%;
        margin: 1rem 2.5%;
        vertical-align: baseline;
        position: relative;
      }

      label {
        cursor: pointer;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="content-left">
      <article>
        <h1>{{TITLE}}</h1>
        <div class="post-date">{{DATE}}</div>
        
        {{CONTENT}}
      </article>
    </div>

    <div class="content-right">
      <div class="post-metadata">
        {{#if CATEGORIES}}
        <div class="categories">
          <span class="label">Categories:</span><br>{{CATEGORIES_LIST}}
        </div>
        {{/if}}
        
        {{#if TAGS}}
        <div class="tags">
          <span class="label">Tags:</span><br>{{TAGS_LIST}}
        </div>
        {{/if}}
      </div>
    </div>
  </div>
</body>
</html>
